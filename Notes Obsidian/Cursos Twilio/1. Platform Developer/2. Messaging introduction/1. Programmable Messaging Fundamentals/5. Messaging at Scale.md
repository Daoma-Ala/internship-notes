Many use cases built on Twilio involve sending a **large amount of messages**
Muchos casos de uso creados en Twilio implican el envío de una gran cantidad de mensajes.

### Envío de mensajes a gran escala

Muchos casos de uso construidos sobre Twilio implican el envío de una gran cantidad de mensajes. Estos podrían ser anuncios de marketing masivos, notificaciones grupales o incluso mensajes transaccionales individuales a gran escala con muchos destinatarios involucrados.

Este módulo discutirá los desafíos que trae el envío de mensajes a gran escala y las soluciones que Twilio ofrece para estos desafíos.

### Filtrado de operadores

Los operadores están obligados a cumplir con las reglas y regulaciones locales. Al mismo tiempo, también buscan proteger a sus usuarios del spam y los mensajes no deseados.

Para lograr este objetivo, a menudo implementan alguna forma de filtrado de tráfico que busca patrones en el tráfico de mensajes e intenta identificar y bloquear cualquier tráfico ofensivo. El funcionamiento de estos sistemas propietarios a menudo se mantiene intencionalmente en secreto para no alertar a los posibles abusadores sobre cómo evitarlos. Esto plantea un desafío para los usuarios legítimos que necesitan enviar mensajes a sus usuarios a gran escala.

En los casos en los que un operador proporcione retroalimentación indicando que ha bloqueado algún mensaje debido a contenido o filtrado de spam, Twilio te pasará esta retroalimentación a través del error [30007](http://www.twilio.com/docs/api/errors/30007) [**Message Delivery - Carrier violation**](http://www.twilio.com/docs/api/errors/30007). Sin embargo, esto no siempre ocurre y, a veces, los operadores simplemente descartan los mensajes que consideran ofensivos sin proporcionar retroalimentación explícita sobre por qué lo hicieron.

Por lo tanto, para evitar estar sujeto al filtrado de operadores en primer lugar, recomendamos seguir estas pautas generales:

- Proporcionar una buena experiencia de usuario con instrucciones claras de opt-in y opt-out.
- Evitar el uso de servicios de acortamiento de URL.
- Para tráfico A2P, considerar el uso de **Short Code** o **Alphanumeric Sender ID**.

Para más información sobre el filtrado de operadores, consulta este [artículo de soporte.](https://support.twilio.com/hc/en-us/articles/223181848-How-Does-Carrier-Filtering-Work-)

Para garantizar la entrega de sus mensajes, le recomendamos leer las [Pautas de CTIA,](https://api.ctia.org/wp-content/uploads/2019/07/190719-CTIA-Messaging-Principles-and-Best-Practices-FINAL.pdf) revisar la [Política de mensajería](https://www.twilio.com/legal/messaging-policy) de Twilio y agregar un [lenguaje de STOP](https://www.twilio.com/blog/us-messaging-policy-guidelines-enforcement-ensure-higher-deliverability) claro a todos los mensajes no conversacionales (es decir, informativos y promocionales).

Y como última nota sobre este tema, para el caso de uso de contraseña de un solo uso, considere usar nuestra [API de verificación](https://www.twilio.com/verify), ya que utiliza identificadores de remitente de Twilio especiales que evitan el filtrado del operador.

### Servicios de Mensajería

Enviar grandes volúmenes de mensajes puede volverse complejo rápidamente. Algunos de los desafíos pueden incluir asegurarse de distribuir el tráfico entre todos tus números de teléfono y garantizar que tengas los tipos correctos de números de teléfono para el tipo de tráfico que estás enviando.

Al mismo tiempo, por ejemplo, podrías querer que tus usuarios siempre reciban tus mensajes desde el mismo número de teléfono para que su dispositivo muestre tus mensajes en el mismo hilo y tus usuarios puedan ver el historial de la conversación. También podrías querer implementar diferentes casos de uso de mensajería masiva y organizar los archivos de registro de cada caso de uso por separado. Estos y otros desafíos se resuelven fácilmente utilizando los **Servicios de Mensajería**.

Los **Servicios de Mensajería** son una herramienta que te ayuda a organizar tu cuenta, números de teléfono y archivos de registro de acuerdo con tus casos de uso de mensajería. Además, las características asociadas de **Copilot** te ayudan a abordar algunos de los desafíos comunes de mensajería a gran escala (más sobre esto más adelante).

Al crear un **Servicio de Mensajería**, se te pedirá que agregues uno o más números de teléfono en él. Luego podrás configurar el webhook de mensajes entrantes y la URL de callback de estado a nivel de **Servicio de Mensajería** y estos ajustes se aplicarán automáticamente a todos sus números de teléfono.

Enviar un mensaje con **Servicio de Mensajería** es muy similar a enviar un mensaje con la **API de SMS Programable**, con un cambio importante. En lugar de incluir un número de teléfono en el campo **From**, incluirás un **MessagingServiceSid**. Twilio luego elegirá uno de los números de teléfono pertenecientes a ese **Servicio de Mensajería** como el **ID de Remitente**.

### Copilot

**Copilot** es un término general para las características adicionales proporcionadas por **Servicio de Mensajería** que hacen que el envío de mensajes (y la mensajería a gran escala) sea más conveniente.

Vamos a listar algunas de esas características aquí.

#### Opt-Out Avanzado

Esta característica de **Copilot** permite personalizar el mecanismo de exclusión predeterminado descrito en uno de los módulos anteriores.

Permite personalizar:

- Las palabras clave que activan las tres acciones de exclusión (Opt-Out, Opt-In, Help).
- Así como la personalización del mensaje que el usuario recibe después de que se haya activado la acción.

Estas personalizaciones se pueden hacer a nivel global, pero también están disponibles anulaciones por país para facilitar la localización.

#### Remitente Fijo (Sticky Sender)

Si los **Servicios de Mensajería** que tienen más de un número de teléfono en su grupo eligieran simplemente el **ID de Remitente** para cada mensaje de forma rotativa, un destinatario que reciba varios mensajes probablemente vería cada mensaje llegar desde un número diferente. Y dado que los dispositivos organizan los mensajes en hilos de conversación según el **ID de Remitente**, cada mensaje aparecería en un hilo diferente, lo que no proporciona una buena experiencia de usuario.

Para abordar esto, **Sticky Sender** mantendrá un mapeo de números **To** y **From**. El mapeo se crea cuando se envía el primer mensaje a un destinatario en particular. Cualquier mensaje posterior de ese **Servicio de Mensajería** al mismo destinatario reutilizará el mismo número **From**.

Como consecuencia, ese destinatario siempre verá los mensajes de tu **Servicio de Mensajería** llegar desde el mismo número de teléfono y en el mismo hilo de conversación en su dispositivo.

El siguiente video demuestra cómo enviar múltiples mensajes desde un **Servicio de Mensajería** con **Sticky Sender** habilitado.


===video===

### Geo-match

Cuando se envía un mensaje a un país o código de área que tiene un número de teléfono coincidente (del mismo país o código de área) en el grupo de números del **Servicio de Mensajería**, ese número de teléfono será seleccionado como el número **From**.

Como consecuencia, los destinatarios verán tus mensajes llegar desde números de teléfono en su ubicación, lo que aumenta la posibilidad de interacción y, en algunos casos, también puede hacer que sea más barato para el destinatario responder.

### Codificación Inteligente (Smart Encoding)

En el módulo de codificación de caracteres, discutimos las codificaciones **GSM-7** y **UCS-2** y el hecho de que si un mensaje contiene incluso un solo carácter que no puede ser codificado en **GSM-7**, se tendrá que usar la codificación **UCS-2** para todo el mensaje (para todos sus segmentos). Esto reduce la capacidad de cada segmento y probablemente resultará en que más segmentos tengan que ser enviados (y cobrados). Esto es desafortunado, especialmente porque en realidad, esto a menudo sucede por accidente, por ejemplo, cuando se usan comillas inteligentes (“ ”) en lugar de comillas rectas (" ").

Para evitar el uso innecesario de **UCS-2**, **Smart Encoding** intentará reemplazar estos caracteres Unicode comúnmente (y a menudo accidentalmente) utilizados con sus equivalentes en **GSM-7**. Para obtener una lista completa de los caracteres transliterados por **Smart Encoding**, consulta esta [página de referencia.](http://www.twilio.com/docs/sms/services/copilot-smart-encoding-char-list)

Esta fue solo una breve introducción a algunas de las funciones más populares de Copilot. Para obtener una lista detallada, consulte nuestra [página de funciones de Copilot.](http://www.twilio.com/docs/sms/services#copilot-features)

