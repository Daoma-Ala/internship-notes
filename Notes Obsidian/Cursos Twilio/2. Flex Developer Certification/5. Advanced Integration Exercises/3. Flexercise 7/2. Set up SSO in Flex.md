
# Configuración de SSO

Configurar SSO en Flex no requiere ningún esfuerzo de programación, sino que simplemente es una cuestión de configuración a través de la página de configuración de SSO en la consola de Twilio, como se muestra en la siguiente captura de pantalla.

![[Pasted image 20250224202003.png]]

Existen instrucciones completas para configurar SSO con varios IdPs bien conocidos. Sin embargo, en este curso usaremos un IdP falso creado específicamente para este propósito, en lugar de seguir los pasos en cada una de las plataformas reales. Habrá diferencias en la configuración de cada IdP del mundo real, pero la configuración en el lado de Flex será la misma.

Nuestro IdP falso no es completamente realista. De hecho, solo tiene un usuario. Su nombre y dirección de correo electrónico están codificados en el sistema. Sin embargo, sí procesa correctamente las solicitudes de inicio de sesión SAML 2.0 y genera respuestas SAML 2.0 válidas y firmadas que permitirán a nuestro único usuario ficticio iniciar sesión en Flex.

La cuenta de usuario que podrá "iniciar sesión" pertenece a un usuario ficticio llamado Joe Owling. Sin embargo, hay un aspecto del proceso de inicio de sesión de Joe que podrás controlar: el rol o roles que se le asignarán en Flex.

Hacemos esto solo para poder examinar el proceso de inicio de sesión y resaltar una parte importante del proceso de aprovisionamiento de usuarios en Flex. Más adelante analizaremos estos aspectos.

Este ejercicio no pretende ilustrar cómo se gestiona a los usuarios en un IdP real, ya que los usuarios normalmente no eligen sus propios roles.

## Pasos para configurar SSO con nuestro IdP falso

Si aún no estás en la página de configuración de SSO, ábrela ahora.

1. Asigna un nombre descriptivo a la configuración. Puede ser cualquier nombre que desees.
2. Copia el siguiente certificado de clave pública X.509 y pégalo en el área de texto correspondiente en el formulario.

```
-----BEGIN CERTIFICATE-----
MIIDVDCCAjwCCQCiJZ7s9KAaFzANBgkqhkiG9w0BAQsFADBsMQswCQYDVQQGEwJV
UzETMBEGA1UECAwKQ2FsaWZvcm5pYTEWMBQGA1UEBwwNU2FuIEZyYW5jaXNjbzEP
MA0GA1UECgwGVHdpbGlvMR8wHQYDVQQDDBZUZXN0IElkZW50aXR5IFByb3ZpZGVy
MB4XDTIxMTExMDExMDcyMloXDTQxMTEwNTExMDcyMlowbDELMAkGA1UEBhMCVVMx
EzARBgNVBAgMCkNhbGlmb3JuaWExFjAUBgNVBAcMDVNhbiBGcmFuY2lzY28xDzAN
BgNVBAoMBlR3aWxpbzEfMB0GA1UEAwwWVGVzdCBJZGVudGl0eSBQcm92aWRlcjCC
ASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKk2UlsBt6ZFXQJR/lln9RpM
3vBvEZOGfYPlnPGvQAEMaY6e/7sAWcI9SB0XHcjIKn+56xdFi0SGviPZZY1dwQoX
T/zzXBIbeOSQJTcbzog/zOKoVsKreEPzVRFMpohyQmh3uAWfC/aOJgYRHtKrVJEk
pQuAGW6Iabmgo25xYzIiTvm6HPTL/08FkWvCgMarTS02dkwg1GNbb3V/gxja77+9
v1nkWVLaX5suuYU56s03xWyzpa/qqQxY4km9i23oXYN/ETCapVMqAmcFFJBg8dIw
OQx4qyz6D80A0CY7WvDPUg4zQFgeMKI+4wrhdt7vq74hg0CfHM38VvGLuhRk8ycC
AwEAATANBgkqhkiG9w0BAQsFAAOCAQEALJ7dd1R7jfY0pi0dNli8OSzriQ52pPFC
yxJn2Hs2XmqBvt6tf532onjBhU+VkBM1ZdOcVR90LMe/KXNBOR/TpOen1OFFluuT
aIh6Jy824QIPpCs6g7ylSaV1xLk5iTs4pQ+SIiTev+O4HMhGDIz5trTO15ELD0ya
KIknbbOstkdzyCobdxamyQ77wVdROUg9Tf90y8fIiGuiBPtriSGlV0zFjHtuJysT
MJ5oWry6fhYNmFeFc3XQ5bOjMgePdMDuz0RzY3J5YcGlZGBZkHIdlVbAsIZprGRv
OJZMVPvWdksbNSRg668a/BKWvUvXf7T1zM/51djEeQifLF0BWoazpQ==
-----END CERTIFICATE-----
```

1. Luego, copia y pega los siguientes valores en el formulario de configuración de SSO:
    
    **Identity Provider Issuer**  
    `https://idp-9351.twil.io/entityid`
    
    **Single Sign-On URL**  
    `https://idp-9351.twil.io/saml/sso`
    

⚠️ Asegúrate de que no haya espacios en blanco al inicio o final de las URLs, ya que esto podría causar un error de "URL inválida".

1. El formulario debería verse así. No te preocupes si tu navegador subraya en rojo el texto del certificado X.509; solo está intentando hacer una corrección ortográfica.
2. Deja el resto de los valores con sus valores predeterminados.
3. Finalmente, haz clic en **Guardar** para completar la configuración de SSO.

![[Pasted image 20250224202017.png]]

Verifica que has completado y guardado el formulario antes de continuar.

Ahora, haz clic en el enlace **"Iniciar sesión con SSO"** en la página y serás redirigido a la página de inicio de sesión del IdP falso.

![[Pasted image 20250224202027.png]]
![[Pasted image 20250224202034.png]]

En la página verás algunos elementos con detalles. Estos están ahí solo como referencia. Más adelante revisaremos el XML del que se extraen estos datos.

En un IdP real, en este punto se mostraría la pantalla de inicio de sesión del proveedor correspondiente.

También notarás que el campo de correo electrónico está deshabilitado, pero puedes seleccionar uno o más roles para el usuario en Flex.

De nuevo, en un IdP real los usuarios no elegirían sus propios roles, pero en este ejercicio lo hacemos para poder examinar cómo se comporta Flex al iniciar sesión con SSO.

Selecciona uno o más roles y haz clic en **"Iniciar sesión"**. Si todo funciona correctamente, ingresarás a Flex como **Joe Owling**.

Ten en cuenta que Joe no existía en Flex antes de este primer inicio de sesión. Sin embargo, pudo acceder porque los usuarios que inician sesión mediante SSO se crean automáticamente en Flex. Más adelante profundizaremos en este proceso.

¡Y eso es todo lo necesario para configurar SSO en Flex!

![[Pasted image 20250224202044.png]]

## Resumen

En esta lección vimos cómo configurar SSO en Flex. Los únicos requisitos en el lado de Flex son:

- El certificado X.509 del IdP
- La URL del emisor del IdP
- La URL de inicio de sesión único del IdP

Antes de pasar a la discusión sobre la gestión de usuarios en Flex, examinaremos en detalle el flujo de inicio de sesión y los datos intercambiados entre Flex (específicamente la API IAM de Twilio) y un IdP.

---
