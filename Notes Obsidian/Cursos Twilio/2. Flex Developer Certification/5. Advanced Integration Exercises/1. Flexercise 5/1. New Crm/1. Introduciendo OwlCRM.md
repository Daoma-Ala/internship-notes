OwlCRM es el tercero de nuestros sistemas CRM de ejemplo, y es un poco más cauteloso que los que hemos visto hasta ahora. Escuchamos sobre él por primera vez en el Flexercise #3, donde presentamos todos nuestros CRMs.  

Al igual que StorkCRM, Owl no puede incrustarse en otra página web a través de un iframe. Sin embargo, las medidas de seguridad de Owl van un poco más allá.  

Como en el Flexercise #4, vamos a utilizar una función proxy de Twilio para acceder a OwlCRM. Pero esta vez necesitaremos autenticar la solicitud desde nuestra función de ayuda a OwlCRM con una clave API. Para completar la cadena de confianza, también tendremos que asegurarnos de que la función de ayuda sea invocada por un usuario válido de Flex. También demostraremos cómo implementar permisos y devolver diferentes datos del CRM para agentes que para supervisores.  

Echemos un vistazo a un diagrama para ayudarnos a entender lo que necesitaremos construir en este curso.  

![[Pasted image 20250224133209.png]]
1. **El agente acepta la tarea**
	Queremos obtener algunos datos del cliente a través de una función proxy de Twilio.
	La función que vamos a utilizar tiene que presentar una URL pública para que nuestro Flex Ul pueda acceder a ella.
	Para bloquear la función a los usuarios autenticados, pasaremos un token portador a la función.
2. **La función valida el token al portador.**
	La función validará el token enviado desde Flex y rechazará las solicitudes que no tengan un token válido.
3. **La función accede a OwICRM**
	La función utiliza una clave API para acceder a OwICRM.
	Mantenemos la clave API en el backend porque no queremos guardar claves API en el cliente y correr el riesgo de que se vean comprometidas.
4. **OwICRM presenta datos de clientes**
	Si la solicitud de API a OwlCRM está acompañada de una clave de API válida, se devolverán datos para el frontend Flex.
	También verificaremos los roles de un usuario para ver si hay elementos específicos de datos que queremos evitar que aparezcan en Flex Ul.

Ahora que hemos visto la vista desde arriba, pasemos a un poco de teoría antes de ponernos más prácticos.