### **Lecci√≥n: Personalizaci√≥n de texto en la interfaz de Flex usando cadenas de plantilla**

Ahora que hemos construido y estilizado la p√°gina de noticias, vamos a afinar **d√≥nde** y **c√≥mo** mostramos varios puntos de datos en la interfaz de usuario. Muchos de los elementos de texto que podr√≠as querer modificar, como etiquetas y mensajes, se controlan a trav√©s de un objeto `strings`. Puedes reasignar este objeto en el m√©todo `init()` del plugin utilizando el **Flex Manager**. Si esto te suena familiar, es porque tambi√©n usamos esta t√©cnica con datos del CRM en el **Flexercise #3**.

---

### **¬øQu√© son las cadenas de contenido en Flex UI?**

Las cadenas de contenido en Flex UI no solo te permiten personalizar √°reas con contenido est√°tico, sino que tambi√©n te dan acceso a datos din√°micos en tiempo de ejecuci√≥n. Esto nos permite crear elementos de la interfaz de usuario que son conscientes del contexto. Puedes aprender m√°s sobre las cadenas de plantilla en la documentaci√≥n de [Localizaci√≥n y plantillas de UI](https://www.twilio.com/docs/flex/localization-and-ui-templating), que incluye una lista de propiedades y atributos contextuales, as√≠ como sus valores predeterminados. Adem√°s, las cadenas de plantilla utilizan el lenguaje de plantillas **Handlebars**.

---

### **Comenzando con cambios peque√±os**

Vamos a hacer algunos cambios peque√±os en el contenido con una l√≠nea de c√≥digo cada uno, dependiendo de si una llamada est√° entrando o no.

#### **1. Cambiar el t√≠tulo cuando no hay tareas**

El cambio en `NoTasksTitle` se aplica cuando no hay una llamada (o tarea de cualquier tipo) entrante. Su valor se ha codificado directamente.

#### **2. Cambiar la l√≠nea de la tarea cuando hay una llamada**

El cambio en `TaskLineCallReserved` se aplica cuando una llamada entra y ha sido seleccionada. Su asignaci√≥n incluye un valor din√°mico relacionado con la ciudad del n√∫mero de tel√©fono del llamante.

Agrega este c√≥digo en la funci√≥n `init()`:

```javascript
// Cadenas de plantilla: cambios de una l√≠nea
manager.strings.NoTasksTitle = "Esperando solicitudes entrantes...";
manager.strings.TaskLineCallReserved = "Llamada desde el n√∫mero de {{task.attributes.caller_city}}";
} // fin de init()
```

---

### **Resultados esperados**

1. **Sin llamadas entrantes**:  
   Si pruebas tu aplicaci√≥n sin una llamada, deber√≠as ver algo como esto:

![[Pasted image 20250224141650.png]]
1. **Con una llamada entrante**:  
   Si llamas y seleccionas la llamada, ver√°s la siguiente personalizaci√≥n:

![[Pasted image 20250224141703.png]]

---

### **Personalizaci√≥n de √°reas de texto m√°s grandes**

Si deseas hacer cambios en √°reas de texto m√°s grandes, puedes reasignar secciones completas de contenido con los valores que te interesen. Por ejemplo, vamos a actualizar toda la pesta√±a **Info** (la cadena `TaskInfoPanelContent`) para que est√© disponible una vez que tengas una tarea seleccionada.

Agrega el siguiente c√≥digo entre las l√≠neas anteriores y el final de la funci√≥n `init()`:

```javascript
// Cadenas de plantilla: TaskInfoPanelContent
manager.strings.TaskInfoPanelContent = `
  <h1>DETALLES DEL CLIENTE</h1>   
  <h2>N√∫mero de tel√©fono: Localidad</h2>
  <p>{{task.attributes.caller_city}}, {{task.attributes.caller_state}} {{task.attributes.caller_zip}}</p>
  
  <h2>N√∫mero de tel√©fono: Pa√≠s</h2>
  <p>{{task.attributes.caller_country}}</p>

  <h2>Flujo de trabajo</h2>
  <p>{{task.workflowName}}</p>

  <hr />
  <h1>CONTEXTO DE LA TAREA</h1>
  <h2>Tarea creada el</h2>
  <p>{{task.dateCreated}}</p>

  <h2>Prioridad de la tarea</h2>
  <p>{{task.priority}}</p>

  <h2>Tipo de tarea</h2>
  <p>{{task.taskChannelUniqueName}}</p>    
`;      
} // fin de init()
```

---

### **Notas importantes**

1. **Sintaxis de interpolaci√≥n**:  
   Observa el uso de **backticks** (`) en la cadena `TaskInfoPanelContent`. Esta sintaxis de interpolaci√≥n de cadenas facilita la incorporaci√≥n de etiquetas HTML en la cadena de plantilla.

2. **Resultado esperado**:  
   Cuando una llamada entra en la lista de tareas, selecci√≥nala y luego haz clic en la pesta√±a **Info** para ver algo como esto:
![[Pasted image 20250224141803.png]]

---

### **Extendiendo el control sobre el texto en Flex UI**

Estas t√©cnicas te permiten controlar una amplia gama de texto en la interfaz de Flex. Por ejemplo, para lograr una mayor localizaci√≥n del contenido, la informaci√≥n del cliente (como el idioma preferido) podr√≠a recopilarse o pasarse a la tarea a trav√©s de tu **Studio Flow**, posiblemente en coordinaci√≥n con un CRM. Luego, podr√≠as basar tus cadenas de plantilla en el idioma elegido.

---

### **Limitaciones de las cadenas de plantilla**

Sin embargo, como veremos en la pr√≥xima lecci√≥n, existen l√≠mites conocidos con las cadenas de plantilla. Estas limitaciones pueden incluir:

- **Complejidad**: Las cadenas de plantilla pueden volverse dif√≠ciles de manejar cuando se necesita l√≥gica m√°s compleja.
- **Flexibilidad**: No siempre es posible personalizar todos los aspectos de la interfaz de usuario con cadenas de plantilla.

---

### **Resumen**

En esta lecci√≥n, hemos:

1. Personalizado texto en la interfaz de Flex usando cadenas de plantilla.
2. Modificado el t√≠tulo cuando no hay tareas y la l√≠nea de la tarea cuando hay una llamada entrante.
3. Actualizado la pesta√±a **Info** con detalles din√°micos del cliente y la tarea.

En la pr√≥xima lecci√≥n, exploraremos las limitaciones de las cadenas de plantilla y c√≥mo superarlas. ¬°Sigue adelante! üöÄ