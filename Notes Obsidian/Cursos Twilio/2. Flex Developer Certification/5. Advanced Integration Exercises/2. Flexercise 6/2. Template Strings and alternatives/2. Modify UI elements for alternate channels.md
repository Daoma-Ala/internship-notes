### **Lecci贸n: Personalizaci贸n de canales personalizados y limitaciones de las cadenas de plantilla**

En esta lecci贸n, exploraremos c贸mo manejar la personalizaci贸n de texto en **canales personalizados** en Flex, donde las cadenas de plantilla tradicionales pueden no funcionar como se espera. Tambi茅n veremos dos t茅cnicas para superar estas limitaciones.

---

### **Contexto: Canales personalizados en Flex**

Flex es **omnicanal** por naturaleza, lo que significa que puede manejar tareas de diferentes canales, como llamadas de voz, chats de SMS, WhatsApp, Facebook Messenger, e incluso canales personalizados que t煤 crees. Por ejemplo, podr铆as crear un canal personalizado para una aplicaci贸n de chat interna o para una plataforma de comunicaciones que a煤n no tenga integraci贸n con Twilio.

Sin embargo, cuando se trata de personalizar la informaci贸n mostrada en tareas de canales personalizados, las **cadenas de plantilla** pueden no comportarse como esperas.

---

### **Ejemplo: Canal personalizado para dispositivos IoT**

Imaginemos que creamos un nuevo canal personalizado para dispositivos **IoT (Internet de las Cosas)** instalados en los veh铆culos de nuestra empresa. Estos dispositivos env铆an alertas cuando los conductores se desv铆an m谩s de 3 millas de la ruta esperada hacia su destino.

Para personalizar la informaci贸n mostrada cuando llega una nueva alerta, podr铆as intentar usar una cadena de plantilla como esta:

```javascript
myIoTChannel.templates.TaskListItem.firstLine = "IoT Alert: {{task.attributes.alert}}";
```

Sin embargo, esta cadena de plantilla **no mostrar谩 la informaci贸n deseada**. 驴Por qu茅?

---

### **El problema: Compilaci贸n de cadenas de plantilla**

El problema radica en que las plantillas de los canales personalizados (como `myIoTChannel`) **no se compilan** por razones de rendimiento. La compilaci贸n es el proceso necesario para expandir las cadenas de plantilla (por ejemplo, reemplazar `{{task.attributes.alert}}` con el valor real). Como resultado, la plantilla no se expande y el texto no se muestra correctamente.

---

### **Soluci贸n 1: Usar `manager.strings` para la compilaci贸n**

Una forma de solucionar este problema es definir la cadena de plantilla en `manager.strings`, ya que estas plantillas **s铆 se compilan**. Luego, puedes hacer referencia a esta plantilla en la definici贸n de la plantilla del canal.

```javascript
// Definir la plantilla en manager.strings
manager.strings.alertTitle = "IoT Alert: {{task.attributes.alert}}";

// Referenciar la plantilla en el canal personalizado
myIoTChannel.templates.TaskListItem.firstLine = "alertTitle";
```

Con este enfoque, la cadena de plantilla se compila correctamente y se expande durante el tiempo de ejecuci贸n.

---

### **Soluci贸n 2: Usar una funci贸n para generar el texto**

La segunda opci贸n, y la m谩s recomendada, es definir la plantilla del canal como una **funci贸n** que devuelve una cadena. Esta funci贸n recibe un objeto `task` como par谩metro y lo utiliza para generar el texto final.

```javascript
myIoTChannel.templates.TaskListItem.firstLine = (task) => {
    return "IoT Alert: " + task.attributes.alert;
};
```

Este enfoque es m谩s flexible y gen茅rico, ya que no depende de la compilaci贸n de cadenas de plantilla.

---

### **Resumen de las soluciones**

| **Enfoque**                     | **Ventajas**                                                                 | **Desventajas**                              |
|----------------------------------|-----------------------------------------------------------------------------|---------------------------------------------|
| **Usar `manager.strings`**       | Simple y directo.                                                           | Requiere definir una plantilla adicional.   |
| **Usar una funci贸n**             | M谩s flexible y gen茅rico. No depende de la compilaci贸n de cadenas de plantilla. | Requiere escribir una funci贸n personalizada. |

---

### **Pr贸ximos pasos**

Ahora que has aprendido a manejar las limitaciones de las cadenas de plantilla en canales personalizados, est谩s listo para explorar el **Framework de Acciones** en Flex. En la pr贸xima lecci贸n, construiremos un plugin para cambiar el comportamiento predeterminado de c贸mo se manejan las reservas de tareas.

---

### **Resumen**

En esta lecci贸n, hemos:

1. Explorado las limitaciones de las cadenas de plantilla en canales personalizados.
2. Aprendido dos t茅cnicas para superar estas limitaciones:
   - Usar `manager.strings` para la compilaci贸n de plantillas.
   - Usar una funci贸n para generar texto din谩mico.
3. Preparado el terreno para explorar el **Framework de Acciones** en la pr贸xima lecci贸n.

隆Sigue adelante y sigue construyendo tu experiencia en Flex! 