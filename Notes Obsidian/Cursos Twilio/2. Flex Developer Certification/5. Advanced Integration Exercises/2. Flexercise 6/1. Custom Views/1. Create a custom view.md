### **Lección: Creación de una vista personalizada para noticias de la empresa**

En esta lección, nuestro objetivo es proporcionar a los empleados acceso a noticias recientes de la empresa y anuncios generales. Para lograrlo, revisaremos la estructura general de la interfaz de usuario de Flex y decidiremos cómo implementar esta funcionalidad.

---

### **Estructura de la interfaz de usuario de Flex**

1. **Vistas en Flex**:  
   Una vista en Flex es una "página" de contenido dentro del marco de la interfaz de usuario, generalmente accesible desde un botón en la barra de navegación. Además de modificar el contenido y la apariencia de una vista de muchas maneras, también puedes crear tus propias vistas personalizadas para la interfaz de Flex.

![[Pasted image 20250224140631.png]]
   *Una instancia de Flex UI sin modificar, actualmente configurada en la vista de Administrador, resaltada en azul a la derecha. Por defecto, la barra de navegación muestra solo iconos de botones, pero puedes seleccionar el menú de hamburguesa (circulado en la parte superior) para ver los nombres de las vistas individuales.*

2. **Vistas predeterminadas**:  
   Hasta ahora, todo nuestro trabajo se ha realizado dentro de la vista **Agent Desktop** (Escritorio del agente). Sin embargo, puedes seguir los mismos conceptos para modificar otras vistas, como **Admin** (Administrador) o **Teams** (Equipos).

3. **Necesidad de una nueva vista personalizada**:  
   Para mostrar noticias de la empresa, no necesitamos que este contenido esté directamente relacionado con tareas en curso o equipos. Además, podría requerir mucho espacio en pantalla. Esto hace que sea un buen caso de uso para una nueva vista personalizada, en lugar de intentar ajustar la información en una vista existente.

---

### **Pasos para agregar una vista personalizada**

1. **Crear un componente personalizado para la vista**.  
2. **Crear un componente personalizado para el botón de la barra de navegación**.  
3. **En el plugin, agregar el botón al `SideNav` y la vista a la `ViewCollection`**.

---

### **Implementación paso a paso**

#### **1. Crear un nuevo plugin**

Si necesitas un repaso sobre cómo generar un nuevo plugin, consulta el **Flexercise #1**. En este ejemplo, nuestro plugin se llama `plugin-flxr6`. Los archivos que necesitaremos son:

```
src/components/NewsViewComponent.js
src/components/NewsNavButtonComponent.js
src/Flxr6Plugin.js
```

Asegúrate de que el archivo del plugin esté cargado en `index.js`.

---

#### **2. Crear el componente de la vista de noticias**

En el archivo `NewsViewComponent.js`, agrega el siguiente código para crear una vista básica:

```javascript
import React from 'react';

// Versión 1: Prueba básica para mostrar la vista al hacer clic en el botón
export default function NewsView() {
    const newsDiv = 'Bienvenido a la vista de NOTICIAS';
    return <div>{newsDiv}</div>;
}
```

---

#### **3. Crear el botón de navegación**

En el archivo `NewsNavButtonComponent.js`, agrega el siguiente código para crear un botón que permita acceder a la vista de noticias:

```javascript
import React from 'react';
import { SideLink, Actions } from '@twilio/flex-ui';

const NewsNavButton = ({ activeView }) => {
   function navigate() {
       Actions.invokeAction('NavigateToView', { viewName: 'news-view' });
   }

   return (
       <SideLink
           showLabel={true}
           icon="Analyze"
           iconActive="AnalyzeBold"
           isActive={activeView === 'news-view'}
           onClick={navigate}>
           Noticias de la empresa
       </SideLink>
   );
};

export default NewsNavButton;
```

- **Iconos**: Puedes usar iconos predeterminados de Flex UI o crear los tuyos propios. Consulta [esta lista](https://example.com/flex-ui-icons) para ver los iconos disponibles.

---

#### **4. Integrar los componentes en el plugin**

En el archivo `Flxr6Plugin.js`, importa los componentes y agrégalos a la interfaz de Flex:

```javascript
import React from 'react';
import { VERSION, View } from '@twilio/flex-ui';
import { FlexPlugin } from '@twilio/flex-plugin';

// Importar componentes para la vista de noticias
import NewsNavButton from './components/NewsNavButtonComponent';
import NewsView from './components/NewsViewComponent';

export default class Flxr6Plugin extends FlexPlugin {
   constructor() {
       super('Flxr6Plugin');
   }

   init(flex, manager) {
       // Agregar el botón de noticias al SideNav
       flex.SideNav.Content.add(
           <NewsNavButton key="news-sidenav-button" />
       );

       // Agregar la vista de noticias a la ViewCollection
       flex.ViewCollection.Content.add(
           <View name="news-view" key="news-view">
               <NewsView key="co-news-view" />
           </View>
       );
   }
}
```

---

#### **5. Ejecutar la aplicación localmente**

Una vez que hayas agregado el código, ejecuta tu aplicación localmente:

```bash
npm install
twilio flex:plugins:start
```

Deberías ver un nuevo botón en la barra de navegación que te permitirá acceder a la vista de noticias.

---

### **Mejoras en la vista de noticias (Versión 2)**

Ahora que tenemos la base, podemos mejorar la vista con un poco de estilo. Reemplaza el código en `NewsViewComponent.js` con lo siguiente:

```javascript
// Versión 2: Estilos básicos en línea
export default function NewsView() {
  const newsDiv = 'Bienvenido a la vista de NOTICIAS';
  return (
    <div style={{ margin: "auto" }}>
        <hr />
        <h1 style={{ color: "salmon", padding: "1em", fontSize: "3em" }}>{newsDiv}</h1>
        <hr />           
    </div>  
  );
}
```

- **Nota**: En JSX, los estilos en línea se escriben como objetos de JavaScript. Las propiedades CSS con guiones (como `font-size`) se convierten a `camelCase` (por ejemplo, `fontSize`).

---

### **Resultado final**

Con estos cambios, deberías ver una vista de noticias mejorada en la interfaz de Flex:

![[Pasted image 20250224140755.png]]

*Vista personalizada con estilos básicos.*

---

### **Resumen**

En esta lección, hemos:

1. Revisado la estructura de la interfaz de usuario de Flex.
2. Creado una nueva vista personalizada para mostrar noticias de la empresa.
3. Agregado un botón de navegación para acceder a la vista.
4. Mejorado la vista con estilos básicos en línea.

¡Ahora estás listo para continuar construyendo y personalizando tu aplicación de Flex! 🚀


For our custom view, what event and what action are being used to change the active view when the user selects our associated button in the navbar?

  
onClick and NavigateToView

