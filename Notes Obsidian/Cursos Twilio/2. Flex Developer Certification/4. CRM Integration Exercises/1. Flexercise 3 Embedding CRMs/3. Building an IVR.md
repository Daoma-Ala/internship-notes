## Construyendo un men√∫ IVR
![[Pasted image 20250210185724.png]]
En esta lecci√≥n, construiremos un men√∫ IVR (Interactive Voice Response).

Este men√∫ solicitar√° al llamante su n√∫mero de cuenta y luego recuperar√° el perfil de cliente correspondiente desde el CRM.


Aunque en este ejercicio nos enfocaremos en un canal de voz, es posible construir chatbots de mensajer√≠a que realicen la misma funci√≥n. De hecho, cuando termines este ejercicio, ¬øpor qu√© no intentarlo?

### **Nuestro CRM: DuckyCRM**

Antes de comenzar, conozcamos nuestro CRM. DuckyCRM est√° disponible en:

üîó [DuckyCRM](https://duckycrm-7409-dev.twil.io/index)

Este CRM tiene dos endpoints de datos:

- **`/profile`** ‚Üí Devuelve una p√°gina web con el perfil del cliente. Lo utilizaremos m√°s adelante para incrustar la p√°gina de perfil del CRM en la UI de Flex.
- **`/json`** ‚Üí Devuelve el perfil del cliente en formato JSON.

Ambos endpoints esperan un atributo llamado **`id`**, con un valor num√©rico que representa el ID de la cuenta del cliente. Como DuckyCRM no es un CRM real, devolver√° un perfil de cliente pseudoaleatorio asociado a ese ID. Esto significa que no es necesario preocuparse por el valor exacto del ID, solo asegurarse de que sea un n√∫mero.

---

### **Studio Flow**

Si eres nuevo en Twilio, [**Studio**](https://www.twilio.com/en-us/serverless/studio) es el constructor visual de flujos de trabajo de Twilio. Los flujos individuales creados en √©l se llaman [**Studio Flows**](https://build.twiliolearning.com/studio-overview?reg=1). Puedes consultar nuestro curso de introducci√≥n a Studio si quieres aprender m√°s.

Las llamadas de voz entrantes a tu n√∫mero de Flex son manejadas por defecto por un Studio Flow llamado **Voice IVR**.

Vamos a construir nuestro IVR dentro de [este Flow.](https://www.twilio.com/console/studio/dashboard)

Te recomendamos seguir este ejercicio con tu propio proyecto y construir tu propio IVR. Alternativamente, al final de esta lecci√≥n, te proporcionaremos una opci√≥n para importar nuestro flujo de ejemplo.

‚ñ∂ **Reproducir video**

---

### **¬°Ahora probemos el IVR!**

‚ñ∂ **Reproducir video**

Esperamos que tu IVR Flow haya funcionado tan bien como el nuestro. Sin embargo, crearlo es un proceso largo y es f√°cil cometer errores.

Si tienes problemas para hacer funcionar tu Flow, o si optaste por no seguir el ejercicio y prefieres importar nuestro flujo, puedes importar nuestro IVR Flow de ejemplo siguiendo estos pasos:


---
**Knowledge Check**
El widget Realizar solicitud HTTP analiza autom√°ticamente cualquier dato XML que se le devuelva a trav√©s de HTTP y le permite acceder a esos datos a trav√©s del objeto widgets.widget name.parsed.

false

Solo los datos JSON se analizan autom√°ticamente. Si su CRM devuelve datos en otro formato, considere crear una funci√≥n de Twilio que analice ese formato y pase los datos analizados a Studio como JSON.

---
What's the recommended way to pass data from Studio to Flex?

Agregando los datos a los atributos de tarea en el widget Enviar a Flex

Agregar datos a los atributos de la tarea le permitir√° acceder a esos datos durante todo el ciclo de vida de esa tarea. Esto incluye el uso de los datos para tomar decisiones de enrutamiento en TaskRouter y mostrar los datos a sus agentes en la interfaz de usuario de Flex.

