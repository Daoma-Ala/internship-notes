# API de Voz Programable de Twilio

La API de Voz Programable te permite realizar, recibir y monitorear llamadas de forma programática a casi cualquier número de teléfono en el mundo.

## ¿Qué es la API de Voz Programable de Twilio y para qué se puede utilizar?

En pocas palabras, la API de Voz Programable te permite realizar, recibir y monitorear llamadas de forma programática a casi cualquier número de teléfono en el mundo. Esta API está diseñada para que puedas enfocarte en desarrollar tu aplicación según tus necesidades específicas, mientras Twilio maneja las complejas conexiones y relaciones con los operadores.

### ¿Qué puedes hacer con la API de Voz Programable?

Existen múltiples casos de uso, desde algo tan simple como el desvío de llamadas hasta la creación de un centro de contacto completo. Twilio Voice ofrece una amplia gama de funciones, incluyendo:

- Reproducción de archivos de audio pregrabados
- Conversión de texto a voz (Text-to-Speech) y voz a texto (Speech-to-Text)
- Conferencias
- Colas
- Grabaciones
- Y más...

## TwiML para Voz Programable

En el primer módulo sobre Twilio, ya hablamos en términos generales de TwiML. Ahora, veamos algunos de los verbos y nombres específicos utilizados con la API de Voz Programable.

Cuando alguien llama a uno de tus números de Twilio, Twilio buscará la URL configurada en el webhook **"A Call Comes In"** asociada con ese número y hará una solicitud HTTP a esa URL. Twilio esperará recibir instrucciones en TwiML que indiquen qué hacer, como:

- Grabar la llamada
- Reproducir un mensaje para el llamante
- Pedir al llamante que presione teclas en su teclado numérico

### Ejemplo de TwiML

El siguiente ejemplo de TwiML usará texto a voz para anunciar:  
*"Por favor, deje un mensaje después del tono."*  
y luego grabará el mensaje del llamante.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Say voice="woman">Please leave a message after the tone.</Say>
    <Record maxLength="20" />
</Response>
```

## Ejemplo de uso de los verbos <Say> y <Record> en TwiML

El ejemplo anterior utilizó los verbos de TwiML [`<Say>`](http://www.twilio.com/docs/voice/twiml/say) y [`<Record>`](http://www.twilio.com/docs/voice/twiml/record).

Otro verbo comúnmente utilizado es [`<Dial>`](http://www.twilio.com/docs/voice/twiml/dial), que por defecto simplemente conecta al llamante con otro teléfono. Si la persona llamada responde, ambas partes quedan conectadas y pueden comunicarse hasta que una de ellas cuelgue. Si la persona llamada no responde, la línea está ocupada o el número no existe, el verbo `<Dial>` finalizará.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Dial timeout="10" record="true">+15005550008</Dial>
<Response>
```

## Uso de atributos en los verbos de TwiML

Estos verbos pueden utilizar atributos para modificar su comportamiento. Un atributo importante que se encuentra, por ejemplo, en los verbos `<Dial>`, [`<Gather>`](http://www.twilio.com/docs/voice/twiml/gather) o [`<Record>`](http://www.twilio.com/docs/voice/twiml/record) es **action**, que toma una URL como argumento.

Con `<Dial>`, si proporcionas una URL en el atributo **action**, Twilio mantendrá la llamada activa después de que la persona marcada haya colgado, realizará una solicitud a la URL especificada en **action** y ejecutará el TwiML recibido en la respuesta.

> ⚠️ **Cualquier verbo de TwiML que aparezca después de un `<Dial>` con un atributo `action` será inaccesible.**

Si no se proporciona un atributo **action**, `<Dial>` finalizará y Twilio pasará al siguiente verbo de TwiML en el documento. Si no hay otro verbo, Twilio terminará la llamada.

Este comportamiento es diferente al de `<Record>` y `<Gather>`. Estos verbos, por defecto, enviarán los resultados de su acción como otra solicitud al documento actual cuando terminen, **a menos que se especifique un atributo `action`**, en cuyo caso enviarán sus resultados a la URL de acción proporcionada.

Por otro lado, `<Dial>` **no** hace una solicitud a la URL del documento actual por defecto si no se proporciona una URL en **action**. En su lugar, el flujo de la llamada continuará con el siguiente verbo de TwiML.

### Más información

Puedes aprender más sobre los verbos, nombres y atributos disponibles en [**TwiML para Voz Programable**](http://www.twilio.com/docs/voice/twiml)  en la documentación oficial de Twilio.



