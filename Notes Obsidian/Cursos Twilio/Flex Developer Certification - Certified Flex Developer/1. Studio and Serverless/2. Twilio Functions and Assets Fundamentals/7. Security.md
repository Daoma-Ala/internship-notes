### Hay dos configuraciones de seguridad que debemos cubrir

#### **Credenciales**

Existen dos configuraciones importantes relacionadas con la seguridad. La primera es una casilla de verificación ubicada en la sección de configuración de **Functions**, llamada **"Enable ACCOUNT_SID and AUTH_TOKEN"**.

![[Pasted image 20250204182810.png]]

Al seleccionar esta casilla, las credenciales de tu proyecto (el **Account SID** y el **Auth Token**) se incluirán en el objeto `context`.

Luego, puedes utilizar estas dos variables directamente o mediante el método auxiliar `getTwilioClient()`. Este método devuelve un objeto cliente totalmente inicializado y autenticado de la **Twilio Node Helper Library**, que puedes utilizar para invocar métodos de la biblioteca auxiliar.

---

#### **Verificación de firma de Twilio**

La segunda configuración importante es una casilla de verificación ubicada en la definición de cada **Function**, llamada **"Check for valid Twilio signature"**.

![[Pasted image 20250204182824.png]]

Todas las solicitudes HTTP provenientes de Twilio incluyen una firma criptográfica que permite a tu aplicación verificar que la solicitud proviene de Twilio y que no ha sido alterada. Si deseas conocer más detalles sobre este proceso, consulta la [documentación oficial.](https://www.twilio.com/docs/usage/security#validating-requests)

Cuando la opción **"Check for valid Twilio signature"** está activada y tu **Function** se activa mediante una solicitud HTTP, la función verificará si la solicitud contiene una firma válida de Twilio y **no se ejecutará a menos que se encuentre una firma válida**.

Este comportamiento puede o no ser deseable, como lo explica la siguiente animación.

![[Pasted image 20250204182904.png]]

Al utilizar la versión API de **Functions**, se puede lograr el mismo comportamiento agregando el sufijo **.protected** al nombre del archivo de tu función (por ejemplo, `getjoke.protected.js`).

Al igual que al crear **Assets privados**, este sufijo se eliminará durante el despliegue y **no formará parte de la URL pública** de tu función.

---


Function acting as a webhook handler for incoming calls to your Twilio phone number. 
- Signature check should be enabled 
- Signature check should be disabled
---
- Signature check should be enabled 

La verificación de firma debe estar habilitada, porque la función se activará desde la infraestructura de Twilio cuando ingrese una nueva llamada entrante y, por lo tanto, se firmará con una firma de Twilio válida.
