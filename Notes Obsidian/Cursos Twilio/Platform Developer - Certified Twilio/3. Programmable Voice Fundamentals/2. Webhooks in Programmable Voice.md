## Uso de Webhooks en Voz Programable

Al igual que otras APIs de Twilio, **Voz Programable** utiliza webhooks para recibir instrucciones de tu aplicación o enviarle información.

Para recordar, un **webhook** es un **callback HTTP**, es decir, una solicitud HTTP que se envía cuando ocurre un evento.

### Categorías principales de Webhooks en Voz Programable

Existen cuatro categorías principales de webhooks utilizados con Voz Programable.

### 1. URLs de Solicitud de Voz (**Voice Request URLs**)

Por ejemplo, cuando tu número de Twilio recibe una llamada, su webhook configurado **"A Call Comes In"** le indicará a Twilio cómo manejar la llamada.  

Necesitarás configurar una URL de webhook que devuelva instrucciones en **TwiML** sobre cómo manejar las llamadas entrantes en tu número de Twilio.
![[Pasted image 20250201201424.png]]
#### A Call Comes 
El webhook A Call Comes In se activa cuando llega una nueva llamada entrante a su número de teléfono Twilio.

### 2. URLs de Callback

De manera similar a los **Status Callbacks** utilizados en mensajería, en Voz Programable también puedes realizar un seguimiento de lo que sucede en tu llamada a través de la **Status Callback URL**.

```js
1 client.calls
2       .create({
3          url: 'http://demo.twilio.com/docs/voice.xml',
4 statusCallback: 'https://myapp.com/calls/events',
5          to: '+15005550008',
6          from: '+15005550006'
7        })
8       .then(call => console.log(call.sid));
```
Los posibles estados de la llamada se detallan en esta [página.](http://support.twilio.com/hc/en-us/articles/223132267-Tracking-the-Status-of-an-Outbound-Twilio-Voice-Call)
[[Seguimiento del Estado de una Llamada Saliente de Twilio]]
### 3. URLs de Acción

Las **Action URLs** se utilizan cuando un evento, en este caso una llamada de voz, ha tomado una acción.

Por ejemplo, las **Action URLs** se usan con el verbo TwiML `<Gather>`, donde si el usuario presiona un dígito en respuesta a algún mensaje de IVR (Respuesta de voz interactiva), Twilio informará a tu aplicación sobre qué dígito se presionó a través de la Action URL. A continuación, tu aplicación podrá devolver instrucciones sobre qué debe ocurrir a continuación.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Gather action="https://yourdomain.com/processGatheredDigits" method="GET">        <Say>
            Please enter your account number,
            followed by the pound sign
        </Say>
    </Gather>
    <Say>We didn't receive any input. Goodbye!</Say>
</Response>
```

### 4. URLs de Espera

Las **Wait URLs** se utilizan para proporcionar instrucciones sobre qué hacer cuando una llamada está en espera, por ejemplo, en una cola de agentes. Se utilizan para proporcionar instrucciones de reproducción de música mientras la llamada está en espera.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Enqueue waitUrl="wait-music.xml">support</Enqueue>
</Response>
```