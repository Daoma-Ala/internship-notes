++Repasando algunas de las caracterÃ­stica del protocolo HTTP:++

Los verbos indican acciones, estas acciones estÃ¡n asociadas a peticiones y recursos. En lÃ­neas generales, sirven para la manipulaciÃ³n de recursos cliente/servidor. Los cÃ³digos de estado son valores numÃ©ricos que tienen un valor semÃ¡ntico.

++Algunos Verbos HTTP son:++
- **GET** â†’ Sirve para solicitar recurso.
- **POST** â†’ Sirve para la creaciÃ³n de recursos en el servidor.
- **PUT** â†’ Sirve para actualizar por completo un recurso.
- **DELETE** â†’ Sirve para eliminar un recurso.

ðŸ”¨ En el ejemplo de la clase se usa **POST** para guardar (enviar a la API) informaciÃ³n en lugar de obtener con **GET** (recibir).

âš ï¸ Hay permisos que se deben tomar en cuenta para que el intercambio sea seguro. Hay que especificar el **modo** (`mode`), aquÃ­ se indica si se permite solicitudes de origen cruzado.

ðŸ”€ **Â¿QuÃ© es un origen cruzado?**  
Un origen tiene dominio/protocolo/puerto, un origen cruzado denominado â€œ**Cross Origin**â€ es la palabra que se utiliza para denominar el tipo de peticiones que se realizan a un dominio diferente del dominio de origen desde donde se realiza la peticiÃ³n. AsÃ­ que si se coloca **CORS**, indica que se permiten ciertas solicitudes predeterminadas de origen cruzado como **GET** y **POST** para salvaguardar y evitar manipulaciones maliciosas.

En el enlace detallan mÃ¡s sobre el concepto de CORS: [aquÃ­](#).

---

Ir a VSC, en la ruta `src/promise` crear el archivo `challenge-post.js`.

El cÃ³digo queda asÃ­ (estÃ¡ comentado):

```js
import fetch from 'node-fetch';
const API = 'https://api.escuelajs.co/api/v1';

function postData(urlApi, data) {
    // Ya no se solicita informaciÃ³n si no se guardarÃ¡ informaciÃ³n
    const response = fetch(urlApi, {
        method: 'POST', // Tiene que ir en mayÃºscula
        mode: 'cors', // CORS es el permiso que va a tener, por defecto va a estar siempre en CORS
        credentials: 'same-origin', // Es opcional
        headers: {
            'Content-Type': 'application/json' // Necesario indicar que lo que se estÃ¡ enviando es de tipo JSON
        },
        body: JSON.stringify(data) // El mÃ©todo JSON.stringify() convierte un objeto o valor de JavaScript en una cadena de texto JSON
    });
    return response;
}

// En https://fakeapi.platzi.com/doc/products se consigue la estructura de cÃ³mo debe ser el objeto que se quiere crear con POST
const data = {
    "title": "Nunca pares de aprender",
    "price": 2,
    "description": "A description",
    "categoryId": 1,
    "images": ["https://placeimg.com/640/480/any"]
}

// Podemos usar el postData como una promesa y con .then obtener la respuesta como un objeto JSON y mostrarlo despuÃ©s en la consola
postData(`${API}/products`, data)
    .then(response => response.json())
    .then(data => console.log(data));
```

ðŸ–¥ï¸ **Â¿CÃ³mo ver la salida despuÃ©s del POST?**

En el OUTPUT de la consola de VSC, si todo estÃ¡ OK, no deberÃ­a salir un 400 (Bad Request).  
Para ver el objeto creado en el navegador, copiamos la direcciÃ³n: `https://api.escuelajs.co/api/v1/products/` y colocamos al final el nÃºmero arrojado por la id del OUTPUT. Si el ID es 271, serÃ­a: `https://api.escuelajs.co/api/v1/products/271`.


ðŸŽ¨ **Ejemplo para actualizar un objeto con PUT:**

```js
// Con PUT para actualizar un objeto
function putData(urlApi, dataUpdate) {
    const response = fetch(urlApi, {
        method: 'PUT',
        mode: 'cors',
        credentials: 'same-origin',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(dataUpdate)
    });
    return response;
}

const dataUpdate = {
    "title": "Se puede cambiar tambiÃ©n otras caracterÃ­sticas",
    "price": 10 // No es necesario colocar todas las caracterÃ­sticas del objeto, solo las que se cambiarÃ¡n
}

putData(`${API}/products/271`, dataUpdate) // Se debe colocar el id del objeto que se quiere modificar
    .then(response => response.json())
    .then(dataUpdate => console.log(dataUpdate));
```

Ejemplo para eliminar un objeto con DELETE:
```js
// Eliminar un objeto indicando el id con DELETE
function deleteData(urlApi) { // No es necesario pasar la data
    const response = fetch(urlApi, {
        method: 'DELETE',
        mode: 'cors',
        credentials: 'same-origin',
        headers: {
            'Content-Type': 'application/json'
        } // No es necesario especificar el body
    });
    return response;
}

const idNumber = 271; // Se debe colocar el id del objeto que se quiere eliminar

deleteData(`${API}/products/${idNumber}`) // No es necesario pasar data
    .then(() => {
        console.log(`Borrado ${idNumber}`); // Es opcional imprimir en consola
    });

```